
@{
    ViewBag.Title = "員工管理";
    List<AttendanceManagement.Models.Department> departments = ViewBag.department;//部門
    List<AttendanceManagement.Models.JobTitle> jobTitles = ViewBag.jobtitle;//職稱
    List<AttendanceManagement.Models.ReviewEmployee> reviewEmployees = ViewBag.review_employee; //待審核資料
    List<AttendanceManagement.Models.PassEmployee> passEmployees = ViewBag.pass_employee; //已審核資料(會變動的資料，有可能是全部也可能是篩選後)
    List<AttendanceManagement.Models.PassEmployee> all_passEmployees = ViewBag.all_passemployee; //全部的已審核資料(不會變動)
}



<div class="main-content">
    <section class="section">
        <h3 class="page_name">
            <img class="nav_logo5" src="~/Content/images/user.png">&nbsp;員工管理
        </h3>

        <div class="section-body" style="margin-top:25px">
            <div class="row">
                <div class="col-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <h4>待審核-員工帳號</h4>
                        </div>
                       
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table">
                                    <tr>
                                        <th>公司ID</th>
                                        <th>員工姓名</th>
                                        <th>E-mail</th>
                                        <th>驗證碼(phone code)</th>
                                        <th>申請時間</th>
                                        <th>審核</th>
                                    </tr>

                                    @foreach (var reviewData in reviewEmployees)
                                    {
                                    <tr>
                                        <td class="rowBorderStart">@reviewData.CompanyId</td>
                                        <td class="rowBorderMiddle">  <a href="#"><img src="~/Content/images/avatar.png" alt="avatar" width="30" class="rounded-circle mr-1">@reviewData.Name </a> </td>
                                        <td class="rowBorderMiddle">@reviewData.Email</td>
                                        <td class="rowBorderMiddle">@reviewData.PhoneCode</td>
                                        <td class="rowBorderMiddle">@reviewData.CreatedTime</td>
                                        @*
                                        <td>
                                            <a href="/EmployeeData/Check?id=@reviewData.HashAccount" class="btn btn-danger btn-action" data-toggle="tooltip" title="Edit"><i class="bi-check2-circle"></i></a>
                                        </td>    
                                        *@
                                        <td class="rowBorderEnd">
                                            <button type="button" class="btn3 btn3-primary btn3-action"><i class="bi-check-lg"></i></button>
                                            <button type="button" class="btn4 btn4-danger btn4-action"><i class="bi-x-lg"></i></button>
                                        </td>
                                    </tr>
                                    }
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @using (Html.BeginForm("SearchEmployee", "EmployeeData", FormMethod.Get))
        {

            <form class="form-inline mr-auto">
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-12">
                        <label class="form-inline">
                            <i class="bi-sliders"></i> 部門：
                            <select id="department" name="department" class="form-control" type="text" placeholder="Search" aria-label="Search">
                                <option>請選擇部門</option>
                                @foreach (var department in departments)
                                {
                                    <option>@department.Name</option>
                                }
                            </select>
                        </label>
                    </div>
                    <div class="col-lg-3 col-md-3 col-12">
                        <label class="form-inline">
                            <i class="bi-filter-left"></i> 職稱：
                            <select id="jobtitle" name="jobtitle" class="form-control" type="text" placeholder="Search" aria-label="Search">
                                <option>請選擇職稱</option>
                                @foreach (var jobtitle in jobTitles)
                                {
                                    <option>@jobtitle.Name</option>
                                }
                            </select>
                        </label>
                    </div>
                    <div class="col-lg-3 col-md-3 col-12">
                        <label class="form-inline">
                            <i class="bi-person"></i> 姓名：
                            <select id="employee_name" name="employee_name" class="form-control" type="text" placeholder="Search" aria-label="Search">
                                <option>請選擇姓名</option>
                                @foreach (var passEmployee in all_passEmployees)
                                {
                                    <option>@passEmployee.Name</option>
                                }
                            </select>
                        </label>
                    </div>
                    <div class="col-lg-1 col-md-1 col-12">
                        <div>
                            <button id="button" name="button" value="search" class="btn" type="submit"><i class="bi-search"></i></button>
                        </div>
                    </div>
                </div>
            </form>
        }

        <div class="section-body" style="margin-top:25px">
            <div class="row">
                <div class="col-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <h4>員工資料</h4>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table">
                                    <tr>
                                        <th></th>
                                        <th>員工姓名</th>
                                        <th>電話</th>
                                        <th>部門</th>
                                        <th>職稱</th>
                                        <th>E-mail</th>
                                        @*<th>狀態</th>*@
                                        <th>編輯</th>
                                    </tr>

                                    @foreach (var pass_employee in passEmployees)
                                    {
                                        <tr>
                                            <td class="rowBorderStart"></td>
                                            <td class="rowBorderMiddle">
                                                <a href="#"><img src="~/Content/images/avatar.png" alt="avatar" width="30" class="rounded-circle mr-1">@pass_employee.Name</a>
                                            </td>
                                            <td class="rowBorderMiddle">@pass_employee.Phone</td>
                                            <td class="rowBorderMiddle">@pass_employee.Department</td>
                                            <td class="rowBorderMiddle">@pass_employee.JobTitle</td>
                                            <td class="rowBorderMiddle">@pass_employee.Email</td>
                                            @*
                            @if (pass_employee.Enabled == true)
                            {
                                <td>
                                    <div class="badge badge-success">使用中</div>
                                </td>
                            }
                            else
                            {
                                <td>
                                    <div class="badge badge-danger">停用</div>
                                </td>
                            }

                            <td>
                                <a href="/EmployeeData/Edit?id=@pass_employee.HashAccount" class="btn2 btn2-primary btn2-action" data-toggle="tooltip" title="Edit"><i class="bi-pencil-square"></i></a>
                            </td>
                                            *@
                                        <td class="rowBorderEnd">
                                            <button type="button" class="btn2 btn2-primary btn2-action" data-toggle="modal" data-target="#exampleModal2.1"><i class="bi-pencil-square"></i></button>
                                        </td>
                                        </tr>
                                        <tr></tr>
                                    }
                                </table>
                            </div>
                        </div>
                        @if (passEmployees.Count >= 10)
                        {
                            <div class="card-footer text-right">
                                <nav class="d-inline-block">
                                    <ul class="pagination mb-0">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" tabindex="-1"><i class="bi-chevron-double-left"></i></a>
                                        </li>
                                        <li class="page-item active">
                                            <a class="page-link" href="#" id="page" name="page" value=1>1 <span class="sr-only">(current)</span></a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="#" id="page" name="page" value=2>2</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="#" id="page" name="page" value=3>3</a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="#"><i class="bi-chevron-double-right"></i></a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>




    <div class="modal fade bd-example-modal-lg" id="exampleModal2.1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog  modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel" style="font-size:20px; font-family:Agency FB">員工姓名：</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <hr size="10" color="#d9d9d9" align="center" width="95%">
                <div class="modal-body2">
                    <div class="cardA card-primary">
                        <div class="row">
                            <div class="col-12">
                                <div class="row" style="margin-top:10px">
                                    <div class="col-12 col-lg-6">
                                        部門
                                    </div>
                                    <div class="col-12 col-lg-6">
                                        職稱
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 col-sm-6">
                                        <input type="text" class="form-control" id="pass_employee.Department" name="pass_employee.Department" value="" readonly="readonly">
                                    </div>

                                    <div class="col-4 col-sm-6">
                                        <input type="text" class="form-control" id="pass_employee.JobTitle" name="pass_employee.JobTitle" " value="" readonly="readonly">
                                    </div>
                                </div>

                                <div class="row" style="margin-top:10px">
                                    <div class="col-12 col-lg-6">
                                        EMAIL
                                    </div>
                                    <div class="col-12 col-lg-6">
                                        電話
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 col-sm-6">
                                        <input type="text" class="form-control" id="pass_employee.Department" name="pass_employee.Department" value="" readonly="readonly">
                                    </div>

                                    <div class="col-4 col-sm-6">
                                        <input type="text" class="form-control" id="pass_employee.JobTitle" name="pass_employee.JobTitle" " value="" readonly="readonly">
                                    </div>
                                </div>


                                <div class="row" style="margin-top:10px">
                                    <div class="col-12 col-lg-6">
                                        <input type="checkbox"/>管理者
                                    </div>
                                    <div class="col-12 col-lg-6">
                                        直屬主管：<select><option>請選擇</option></select>
                                    </div>
                                </div>


                                <div class="row" style="margin-top:20px">
                                    <div class="col-12 col-lg-12 text-center">
                                        <button type="button" class="btn3 btn3-primary btn3-action" data-toggle="modal" data-target="#exampleModal2.1"><i class="bi-check-lg"></i></button>
                                        <button type="button" class="btn4 btn4-danger btn4-action" data-toggle="modal" data-target="#exampleModal2.1" data-dismiss="modal"><i class="bi-x-lg"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script>
        @*var itemA = '<%=@foreach(var pass_employee in passEmployees) { @pass_employee.HashAccount} %>'*@

        $('#exampleModal2.1).on('bs.modal', function(event) {
                var button = $(event.relatedTarget)
            var recipient = button.data('whatever')
            var modal = $(this)
            modal.find('.modal-title').text('New message to ' + recipient)
            modal.find('.modal-body input').val(recipient)
        })

    </script>