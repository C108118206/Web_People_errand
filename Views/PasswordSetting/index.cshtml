
@{ ViewBag.Title = "密碼設定";
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
    List<AttendanceManagement.Models.ManagerKeyData> managerKeyDatas = ViewBag.ManagerKeyData;
}
@*<style>
        html, body {
            width: 100%;
            height: 100%;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>

    <script>
        var map;
        function initMap() {

        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0xOKdg7UH0RrFHjydfMhRIz2xvpWkB9E&callback=initMap" async defer></script>*@

<div class="login-brand">
    <span class="nav_logo-name2">&nbsp;</span>
    @*<div id="map"></div>*@
</div>

@if (managerKeyDatas.Count == 0 || managerKeyDatas[0].ManagerKeyOverDate < DateTime.Now)
{

    <div class="card2 card-primary">
        <div class="card-header"><p>OOPS!抱歉您的連結已過時</p><p></p><h5>請重新發送請求</h5></div>
    </div>
}
else
{
    using (Html.BeginForm("ManagerPassword", "PasswordSetting", new { id = managerKeyDatas[0].HashAccount }, FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        <div class="card2 card-primary">
            <div class="card-header"><nobr id="companytext">您的公司代碼 : </nobr><nobr id="companytext">@managerKeyDatas[0].Code</nobr></div>
            <div class="card-header" style="margin-top:auto"><nobr id="companyhello">@managerKeyDatas[0].Name</nobr><nobr id="companyhello">你好 ! 請設定您的新密碼 : </nobr></div>
            <div class="card-body">
                <form method="POST" action="#" class="needs-validation" novalidate="">
                    <div class="form-group">
                        <label for="mpassword" style="font-size:medium;">Password</label>
                        <div class="input-group">
                            <input id="mpassword" name="manager_password" type="password" class="form-control" placeholder="Enter password" tabindex="1">
                            <div class="input-group-append">
                                <div class="input-group-text" style="border: 1px solid #C2BFBF; background-color: #FFFFFF; box-shadow: 3px 3px 3px #D2D3D3; margin-top: -30px;">
                                    <i id="hide1" class="bi bi-eye-slash" onclick="showPsw()" style="display:inline-block;"></i>
                                    <i id="show1" class="bi bi-eye" onclick="showPsw()" style="display:none;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="input-group">
                            <input id="mpassword2" name="manager_password2" type="password" class="form-control" placeholder="Confirm password" tabindex="1" maxlength="30">
                            <div class="input-group-append">
                                <div class="input-group-text" style="border: 1px solid #C2BFBF; background-color: #FFFFFF; box-shadow: 3px 3px 3px #D2D3D3; margin-top: -30px;">
                                    <i id="hide2" class="bi bi-eye-slash" onclick="showPsw2()" style="display:inline-block;"></i>
                                    <i id="show2" class="bi bi-eye" onclick="showPsw2()" style="display:none;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary btn-block" tabindex="4" style="background-image: linear-gradient(to top, #09203f 0%, #537895 100%); opacity: 40%; border: 1px solid #ABB7C3">
                            確認
                        </button>
                    </div>
                </form>
            </div>
        </div>
    }
}
<script>
    var x1 = document.getElementById("mpassword");
    var x2 = document.getElementById("mpassword2");
    function showPsw() {
        if (x1.type === "password") {
            x1.type = "text";
            document.getElementById('show1').style.display = "inline-block";
            document.getElementById('hide1').style.display = "none";
        } else {
            x1.type = "password";
            document.getElementById('hide1').style.display = "inline-block";
            document.getElementById('show1').style.display = "none";
        }
    }
    function showPsw2() {
        if (x2.type === "password") {
            x1.type = "text";
            document.getElementById('show2').style.display = "inline-block";
            document.getElementById('hide2').style.display = "none";
        } else {
            x2.type = "password";
            document.getElementById('hide2').style.display = "inline-block";
            document.getElementById('show2').style.display = "none";
        }
    }
</script>

